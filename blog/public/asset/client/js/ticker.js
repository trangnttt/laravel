!function(e){e.fn.ticker=function(t){var o=e.extend({},e.fn.ticker.defaults,t);if(0==e(this).length)return window.console&&window.console.log?window.console.log("Element does not exist in DOM!"):alert("Element does not exist in DOM!"),!1;var n="#"+e(this).attr("id"),i=e(this).get(0).tagName;return this.each((function(){function t(e){var t,o=0;for(t in e)e.hasOwnProperty(t)&&o++;return o}function d(e){o.debugMode&&(window.console&&window.console.log?window.console.log(e):alert(e))}function l(){p.contentLoaded=!0,e(p.dom.titleElem).html(p.newsArr["item-"+p.position].type),e(p.dom.contentID).html(p.newsArr["item-"+p.position].content),p.position==t(p.newsArr)-1?p.position=0:p.position++,distance=e(p.dom.contentID).width(),time=distance/o.speed,function(){if(e(p.dom.contentID).css("opacity","1"),!p.play)return!1;var t=e(p.dom.titleID).width()+20;e(p.dom.revealID).css(o.direction,t+"px"),"fade"==o.displayType?e(p.dom.revealID).hide(0,(function(){e(p.dom.contentID).css(o.direction,t+"px").fadeIn(o.fadeInSpeed,a)})):"scroll"==o.displayType||e(p.dom.revealElem).show(0,(function(){e(p.dom.contentID).css(o.direction,t+"px").show(),contentWindowSize=e(p.dom.tickerID).width()-e(p.dom.titleID).width()-20,e(p.dom.contentID).width()<=contentWindowSize?(animationAction="right"==o.direction?{marginRight:distance+"px"}:{marginLeft:distance+"px"},e(p.dom.revealID).css("margin-"+o.direction,"0px").delay(20).animate(animationAction,time,"linear",a)):(delay_scroll=contentWindowSize/o.speed,time_scroll=e(p.dom.contentID).width()/o.speed-delay_scroll,animationAction="right"==o.direction?{marginRight:contentWindowSize-7+"px"}:{marginLeft:contentWindowSize-7+"px"},e(p.dom.revealID).css("margin-"+o.direction,"0px").delay(20).animate(animationAction,delay_scroll,"linear"),scrollSize=e(p.dom.titleID).width()+20-e(p.dom.contentID).width()+contentWindowSize,animationAction_scroll="right"==o.direction?{right:scrollSize+"px"}:{left:scrollSize+"px"},e(p.dom.contentID).delay(delay_scroll).animate(animationAction_scroll,time_scroll,"linear",a))}))}()}function a(){p.play?(e(p.dom.contentID).delay(o.pauseOnItems).fadeOut(o.fadeOutSpeed),"fade"==o.displayType?e(p.dom.contentID).fadeOut(o.fadeOutSpeed,(function(){e(p.dom.wrapperID).find(p.dom.revealElem+","+p.dom.contentID).hide().end().find(p.dom.tickerID+","+p.dom.revealID).show().end().find(p.dom.tickerID+","+p.dom.revealID).removeAttr("style"),l()})):e(p.dom.revealID).hide(0,(function(){e(p.dom.contentID).fadeOut(o.fadeOutSpeed,(function(){e(p.dom.wrapperID).find(p.dom.revealElem+","+p.dom.contentID).hide().end().find(p.dom.tickerID+","+p.dom.revealID).show().end().find(p.dom.tickerID+","+p.dom.revealID).removeAttr("style"),l()}))}))):e(p.dom.revealElem).hide()}function s(){p.play=!1,e(p.dom.tickerID+","+p.dom.revealID+","+p.dom.titleID+","+p.dom.titleElem+","+p.dom.revealElem+","+p.dom.contentID).stop(!0,!0),e(p.dom.revealID+","+p.dom.revealElem).hide(),e(p.dom.wrapperID).find(p.dom.titleID+","+p.dom.titleElem).show().end().find(p.dom.contentID).show()}function r(){p.play=!0,p.paused=!1,a()}function c(o){switch(s(),o){case"prev":0==p.position?p.position=t(p.newsArr)-2:1==p.position?p.position=t(p.newsArr)-1:p.position=p.position-2,e(p.dom.titleElem).html(p.newsArr["item-"+p.position].type),e(p.dom.contentID).html(p.newsArr["item-"+p.position].content);break;case"next":e(p.dom.titleElem).html(p.newsArr["item-"+p.position].type),e(p.dom.contentID).html(p.newsArr["item-"+p.position].content)}p.position==t(p.newsArr)-1?p.position=0:p.position++}var m=(new Date).getTime(),p={position:0,time:0,distance:0,newsArr:{},play:!0,paused:!1,contentLoaded:!1,dom:{contentID:"#ticker-content-"+m,titleID:"#ticker-title-"+m,titleElem:"#ticker-title-"+m+" SPAN",tickerID:"#ticker-"+m,wrapperID:"#ticker-wrapper-"+m,revealID:"#ticker-swipe-"+m,revealElem:"#ticker-swipe-"+m+" SPAN",controlsID:"#ticker-controls-"+m,prevID:"#prev-"+m,nextID:"#next-"+m,playPauseID:"#play-pause-"+m}};return"UL"!=i&&"OL"!=i&&!0===o.htmlFeed?(d("Cannot use <"+i.toLowerCase()+"> type of element for this plugin - must of type <ul> or <ol>"),!1):("rtl"==o.direction?o.direction="right":o.direction="left",function(){if(0==p.contentLoaded)if(o.ajaxFeed)"xml"==o.feedType?e.ajax({url:o.feedUrl,cache:!1,dataType:o.feedType,async:!0,success:function(e){count=0;for(var n=0;n<e.childNodes.length;n++)"rss"==e.childNodes[n].nodeName&&(xmlContent=e.childNodes[n]);for(var i=0;i<xmlContent.childNodes.length;i++)"channel"==xmlContent.childNodes[i].nodeName&&(xmlChannel=xmlContent.childNodes[i]);for(var a=0;a<xmlChannel.childNodes.length;a++)if("item"==xmlChannel.childNodes[a].nodeName){xmlItems=xmlChannel.childNodes[a];for(var s,r=!1,c=0;c<xmlItems.childNodes.length;c++)"title"==xmlItems.childNodes[c].nodeName?s=xmlItems.childNodes[c].lastChild.nodeValue:"link"==xmlItems.childNodes[c].nodeName&&(r=xmlItems.childNodes[c].lastChild.nodeValue),!1!==s&&""!=s&&!1!==r&&(p.newsArr["item-"+count]={type:o.titleText,content:'<a href="'+r+'">'+s+"</a>"},count++,s=!1,r=!1)}return t(p.newsArr)<1?(d("Couldn't find any content from the XML feed for the ticker to use!"),!1):(p.contentLoaded=!0,void l())}}):d("Code Me!");else{if(!o.htmlFeed)return d("The ticker is set to not use any types of content! Check the settings for the ticker."),!1;if(!(e(n+" LI").length>0))return d("Couldn't find HTML any content for the ticker to use!"),!1;e(n+" LI").each((function(t){p.newsArr["item-"+t]={type:o.titleText,content:e(this).html()}}))}}(),e(n).wrap('<div id="'+p.dom.wrapperID.replace("#","")+'"></div>'),e(p.dom.wrapperID).children().remove(),e(p.dom.wrapperID).append('<div id="'+p.dom.tickerID.replace("#","")+'" class="ticker"><div id="'+p.dom.titleID.replace("#","")+'" class="ticker-title"><span>\x3c!-- --\x3e</span></div><p id="'+p.dom.contentID.replace("#","")+'" class="ticker-content"></p><div id="'+p.dom.revealID.replace("#","")+'" class="ticker-swipe"><span>\x3c!-- --\x3e</span></div></div>'),e(p.dom.wrapperID).removeClass("no-js").addClass("ticker-wrapper has-js "+o.direction),e(p.dom.tickerElem+","+p.dom.contentID).hide(),o.controls&&(e(p.dom.controlsID).on("click mouseover mousedown mouseout mouseup",(function(t){var o=t.target.id;if("click"==t.type)switch(o){case p.dom.prevID.replace("#",""):p.paused=!0,e(p.dom.playPauseID).addClass("paused"),c("prev");break;case p.dom.nextID.replace("#",""):p.paused=!0,e(p.dom.playPauseID).addClass("paused"),c("next");break;case p.dom.playPauseID.replace("#",""):1==p.play?(p.paused=!0,e(p.dom.playPauseID).addClass("paused"),s()):(p.paused=!1,e(p.dom.playPauseID).removeClass("paused"),r())}else"mouseover"==t.type&&e("#"+o).hasClass("controls")?e("#"+o).addClass("over"):"mousedown"==t.type&&e("#"+o).hasClass("controls")?e("#"+o).addClass("down"):"mouseup"==t.type&&e("#"+o).hasClass("controls")?e("#"+o).removeClass("down"):"mouseout"==t.type&&e("#"+o).hasClass("controls")&&e("#"+o).removeClass("over")})),e(p.dom.wrapperID).append('<ul id="'+p.dom.controlsID.replace("#","")+'" class="ticker-controls"><li id="'+p.dom.playPauseID.replace("#","")+'" class="jnt-play-pause controls"><a href="">\x3c!-- --\x3e</a></li><li id="'+p.dom.prevID.replace("#","")+'" class="jnt-prev controls"><a href="">\x3c!-- --\x3e</a></li><li id="'+p.dom.nextID.replace("#","")+'" class="jnt-next controls"><a href="">\x3c!-- --\x3e</a></li></ul>')),"fade"!=o.displayType&&e(p.dom.contentID).mouseover((function(){0==p.paused&&s()})).mouseout((function(){0==p.paused&&r()})),void(o.ajaxFeed||l()))}))},e.fn.ticker.defaults={speed:.05,ajaxFeed:!1,feedUrl:"",feedType:"xml",displayType:"reveal",htmlFeed:!0,debugMode:!0,controls:!1,direction:"ltr",pauseOnItems:3e3,fadeInSpeed:600,fadeOutSpeed:300},e("#sample").ticker()}(jQuery);
